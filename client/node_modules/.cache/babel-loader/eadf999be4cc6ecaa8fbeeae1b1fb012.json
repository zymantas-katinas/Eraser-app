{"ast":null,"code":"var _jsxFileName = \"/Users/zymka/Desktop/web projects/react playground/my-app/client/src/components/Draw/Canvas.jsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nexport default function Canvas(props) {\n  const [drawing, setDrawing] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [src, setSrc] = useState();\n  const postRef = useRef();\n  const canvasRect = useRef();\n  const inputRef = useRef(); // set drawing URI to state when time is finished\n\n  useEffect(() => {\n    const dataURI = canvasRef.current.toDataURL();\n    setSrc(dataURI);\n  }, [props.ifFinished]); // set current title state when typing to input\n\n  const inputTitle = event => {\n    event.preventDefault();\n    setTitle(event.target.value);\n  }; //----- POST artpiece to DB when post is clicked\n\n\n  const artpiece = {\n    username: \"zymka je\",\n    title: title,\n    uri: src,\n    duration: props.drawingTime\n  };\n\n  const clickPost = () => {\n    if (title) {\n      axios.post('/api/artpieces/add', artpiece).then(res => console.log(res.data)); // styling when post clicked\n      // canvasRect.current.classList.add('canvas__rectPostClick')\n\n      canvasRect.current.style.transition = \"0.5s\";\n      canvasRect.current.style.transform = `translate(${window.innerWidth + canvasRect.current.style.width}px)`;\n      canvasRect.current.style.opacity = \"0\";\n      postRef.current.style.opacity = \"0\";\n      inputRef.current.style.opacity = \"0\";\n      setTimeout(() => {\n        canvasRect.current.style.transition = \"0s\";\n        canvasRect.current.style.transform = `translate(-${window.innerWidth + canvasRect.current.style.width}px)`;\n      }, 550);\n      setTimeout(() => {\n        setTitle(\"\");\n        canvasRect.current.style.transition = \"0.4s\";\n        canvasRect.current.style.opacity = \"1\";\n        canvasRect.current.style.transform = \"none\";\n        props.reset();\n      }, 1000);\n    } else {\n      inputRef.current.style.transform = \"translate(3px, 3px)\";\n      setTimeout(() => {\n        inputRef.current.style.transform = \"translate(0)\";\n      }, 100);\n    }\n  }; // hide post button if tite is empty\n\n\n  useEffect(() => {\n    if (props.ifFinished) {\n      if (title) {\n        postRef.current.style.opacity = '1';\n      } else {\n        postRef.current.style.opacity = '0.3';\n      }\n    }\n  }, [title]); // ------- DRAW \n\n  const canvasRef = useRef();\n  const ctx = useRef();\n  useEffect(() => {\n    ctx.current = canvasRef.current.getContext('2d');\n  }, []); // draw when moving mouse if draw = true\n\n  const handleMouseMove = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    const coords = [e.clientX - canvasRef.current.offsetLeft, e.pageY - canvasRef.current.offsetTop];\n\n    if (drawing) {\n      ctx.current.lineTo(...coords);\n      ctx.current.stroke();\n    }\n  }; // begin path / start drawing\n\n\n  const startDrawing = e => {\n    if (ctx.current) {\n      ctx.current.lineJoin = 'round';\n      ctx.current.lineCap = 'round';\n      ctx.current.lineWidth = 20; // get background color and set brush color\n\n      const appDiv = document.querySelector(\"body\");\n      const appStyle = getComputedStyle(appDiv);\n      const color = appStyle.backgroundColor;\n      ctx.current.strokeStyle = color;\n      ctx.current.beginPath(); // actual coordinates\n\n      ctx.current.moveTo(e.clientX - canvasRef.current.offsetLeft, e.pageY - canvasRef.current.offsetTop);\n    }\n  };\n\n  const stopDrawing = () => {\n    ctx.current.closePath();\n  }; //clear function\n\n\n  const handleClear = () => {\n    ctx.current.clearRect(0, 0, 415, 415);\n  }; // ------- TIMER \n  // Reset if reset/start is clicked in parent.\n\n\n  useEffect(() => {\n    handleClear();\n\n    if (props.ifStart === \"reset\") {\n      setDrawing(true);\n    } else {\n      setDrawing(false);\n    }\n  }, [props.ifStart]); // Stop when time is 0\n\n  useEffect(() => {\n    if (props.ifFinished) {\n      setDrawing(false);\n      canvasRect.current.classList.add('canvas__rectFinished');\n      setTimeout(() => {\n        canvasRect.current.classList.remove('canvas__rectFinished');\n      }, 300);\n    }\n  }, [props.ifFinished]);\n\n  const shake = () => {\n    if (props.ifFinished) {\n      canvasRect.current.style.transition = \"0\";\n      let count = 1;\n      const shaker = setInterval(() => {\n        count += 1;\n\n        if (count % 2 === 0) {\n          canvasRect.current.style.transform = \"translate(10px, 10px)\";\n          canvasRect.current.style.transform = \"rotate(5deg)\";\n        } else {\n          canvasRect.current.style.transform = \"translate(-10px, -10px)\";\n          canvasRect.current.style.transform = \"rotate(-5deg)\";\n        }\n\n        if (count > 20) {\n          canvasRect.current.style.transform = \"translate(0)\";\n          canvasRect.current.style.transform = \"rotate(0)\";\n          clearInterval(shaker);\n        }\n      }, 50);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"canvas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, props.ifFinished ? React.createElement(\"div\", {\n    className: \"canvas__btnInput\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    ref: postRef,\n    className: \"wideBtn\",\n    onClick: clickPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"post\"), React.createElement(\"input\", {\n    ref: inputRef,\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"TITLE\",\n    autoComplete: \"off\",\n    onChange: inputTitle,\n    value: title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  })) : null, React.createElement(\"div\", {\n    ref: canvasRect,\n    className: \"canvas__rect\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(\"canvas\", {\n    ref: canvasRef,\n    width: 415,\n    height: 415,\n    onClick: shake // onMouseUp={stopDrawing}\n    ,\n    onMouseOver: startDrawing,\n    onMouseOut: stopDrawing,\n    onTouchStart: startDrawing,\n    onMouseMove: handleMouseMove,\n    onTouchMove: handleMouseMove,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/zymka/Desktop/web projects/react playground/my-app/client/src/components/Draw/Canvas.jsx"],"names":["React","useState","useEffect","useRef","axios","Canvas","props","drawing","setDrawing","title","setTitle","src","setSrc","postRef","canvasRect","inputRef","dataURI","canvasRef","current","toDataURL","ifFinished","inputTitle","event","preventDefault","target","value","artpiece","username","uri","duration","drawingTime","clickPost","post","then","res","console","log","data","style","transition","transform","window","innerWidth","width","opacity","setTimeout","reset","ctx","getContext","handleMouseMove","e","stopPropagation","coords","clientX","offsetLeft","pageY","offsetTop","lineTo","stroke","startDrawing","lineJoin","lineCap","lineWidth","appDiv","document","querySelector","appStyle","getComputedStyle","color","backgroundColor","strokeStyle","beginPath","moveTo","stopDrawing","closePath","handleClear","clearRect","ifStart","classList","add","remove","shake","count","shaker","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nexport default function Canvas(props) {\n  const [drawing, setDrawing] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [src, setSrc] = useState()\n\n  const postRef = useRef()\n  const canvasRect = useRef()\n  const inputRef = useRef()\n\n  // set drawing URI to state when time is finished\n  useEffect(()=>{\n    const dataURI = canvasRef.current.toDataURL();\n    setSrc(dataURI)\n  },[props.ifFinished] )  \n\n  // set current title state when typing to input\n  const inputTitle = (event) => {\n    event.preventDefault()\n      setTitle(event.target.value)\n    }\n    \n  //----- POST artpiece to DB when post is clicked\n  const artpiece = {\n    username: \"zymka je\",\n    title: title,\n    uri: src,\n    duration: props.drawingTime,\n  }\n  const clickPost = () => {  \n    if(title){\n      axios.post('/api/artpieces/add', artpiece)\n      .then(res => console.log(res.data));\n\n      // styling when post clicked\n      // canvasRect.current.classList.add('canvas__rectPostClick')\n      canvasRect.current.style.transition = \"0.5s\"\n      canvasRect.current.style.transform = `translate(${window.innerWidth + canvasRect.current.style.width}px)`\n      canvasRect.current.style.opacity = \"0\"\n      postRef.current.style.opacity = \"0\"\n      inputRef.current.style.opacity = \"0\"\n      setTimeout(() =>{ \n        canvasRect.current.style.transition = \"0s\"\n        canvasRect.current.style.transform = `translate(-${window.innerWidth + canvasRect.current.style.width}px)`\n      }, 550)\n      setTimeout(() =>{\n        setTitle(\"\")\n        canvasRect.current.style.transition = \"0.4s\"\n        canvasRect.current.style.opacity = \"1\"\n        canvasRect.current.style.transform = \"none\"\n        props.reset()\n      }, 1000)\n    } else {\n      inputRef.current.style.transform = \"translate(3px, 3px)\"\n      setTimeout(() =>{\n        inputRef.current.style.transform = \"translate(0)\"\n      }, 100)\n    }\n  }\n\n  // hide post button if tite is empty\n  useEffect(() => {\n    if(props.ifFinished){\n      if(title){\n        postRef.current.style.opacity = '1'\n      } else {\n        postRef.current.style.opacity = '0.3'\n      }\n    }\n  }, [title])\n\n // ------- DRAW \n const canvasRef = useRef()\n const ctx = useRef()\n useEffect(() => {\n   ctx.current = canvasRef.current.getContext('2d')   \n }, [])\n\n  // draw when moving mouse if draw = true\n  const handleMouseMove = (e) => {\n    e.preventDefault()\n    e.stopPropagation();\n    const coords = [\n      e.clientX - canvasRef.current.offsetLeft,\n      e.pageY - canvasRef.current.offsetTop\n    ]\n    if (drawing) { \n      ctx.current.lineTo(...coords)\n      ctx.current.stroke()\n    }\n  }\n // begin path / start drawing\n  const startDrawing = (e) => {\n    if(ctx.current){\n      ctx.current.lineJoin = 'round'\n      ctx.current.lineCap = 'round'\n      ctx.current.lineWidth = 20\n          // get background color and set brush color\n          const appDiv = document.querySelector(\"body\")\n          const appStyle = getComputedStyle(appDiv)\n          const color = appStyle.backgroundColor    \n      ctx.current.strokeStyle = color\n      ctx.current.beginPath();\n      // actual coordinates\n      ctx.current.moveTo(\n        e.clientX - canvasRef.current.offsetLeft,\n        e.pageY - canvasRef.current.offsetTop\n      )\n    }\n  }\n\n  const stopDrawing = () => {\n    ctx.current.closePath()\n  }\n\n  //clear function\n  const handleClear = () => {\n    ctx.current.clearRect(0, 0, 415, 415)\n }\n\n // ------- TIMER \n  // Reset if reset/start is clicked in parent.\n  useEffect(() => {\n    handleClear()\n    if(props.ifStart === \"reset\"){\n      setDrawing(true)\n    } else {\n      setDrawing(false)\n    }\n  }, [props.ifStart])\n\n  // Stop when time is 0\n  useEffect(() => {\n    if(props.ifFinished){\n      setDrawing(false)\n      canvasRect.current.classList.add('canvas__rectFinished')\n      setTimeout(() =>{\n        canvasRect.current.classList.remove('canvas__rectFinished')\n      }, 300)\n    } \n  }, [props.ifFinished])\n\n  const shake = () => {\n    if(props.ifFinished) {\n      canvasRect.current.style.transition = \"0\"\n      let count = 1\n      const shaker = setInterval(() => {\n        count += 1\n        if(count % 2 === 0){\n          canvasRect.current.style.transform = \"translate(10px, 10px)\"\n          canvasRect.current.style.transform = \"rotate(5deg)\"\n        } else {\n          canvasRect.current.style.transform = \"translate(-10px, -10px)\"\n          canvasRect.current.style.transform = \"rotate(-5deg)\"\n        }\n        if(count > 20){\n          canvasRect.current.style.transform = \"translate(0)\"\n          canvasRect.current.style.transform = \"rotate(0)\"\n          clearInterval(shaker)\n        }\n      }, 50)\n    }\n  }\n\n  return (\n    <div className =\"canvas\">\n      {props.ifFinished ? \n       <div className =\"canvas__btnInput\">\n          <button ref= {postRef} className =\"wideBtn\" onClick ={clickPost}>post</button>\n          <input \n            ref ={inputRef}\n            type=\"text\" \n            name=\"title\" \n            placeholder =\"TITLE\" \n            autoComplete=\"off\"  \n            onChange={inputTitle} \n            value={title}\n          /> \n        </div>\n      : null}\n\n      <div ref = {canvasRect} className =\"canvas__rect\">\n        <canvas\n        ref={canvasRef}\n        width={415}\n        height={415}\n        onClick={shake}\n        // onMouseUp={stopDrawing}\n        onMouseOver={startDrawing}\n        onMouseOut={stopDrawing}\n        onTouchStart={startDrawing}\n        onMouseMove={handleMouseMove}\n        onTouchMove={handleMouseMove}\n        />\n      </div>\n    </div>\n  )\n}\n\n"]},"metadata":{},"sourceType":"module"}