{"ast":null,"code":"var _jsxFileName = \"/Users/zymka/Desktop/web projects/react playground/my-app/src/components/Canvas.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nexport default function Canvas(props) {\n  const [drawing, setDrawing] = useState(false); // const [restart, setRestart] = useState(true)\n\n  const [imgArr, setImgArr] = useState([]);\n  const [title, setTitle] = useState(\"\");\n  const [pointerPos, setPointerPos] = useState([]);\n  const canvasRef = useRef();\n  const ctx = useRef();\n  useEffect(() => {\n    ctx.current = canvasRef.current.getContext('2d');\n  }, []); // Reset if reset/start is clicked in parent.\n\n  useEffect(() => {\n    handleClear();\n\n    if (props.ifStart === \"reset\") {\n      setDrawing(true);\n    } else {\n      setDrawing(false);\n    }\n  }, [props.ifStart]); // Stop when time is 0\n\n  useEffect(() => {\n    if (props.ifFinished) {\n      setDrawing(false);\n    }\n  }, [props.ifFinished]); // push imgArr to App\n\n  useEffect(() => {\n    props.getArr(imgArr);\n  }, [imgArr]); // push img Src and Title to imgArr state when POST is clicked\n\n  useEffect(() => {\n    const dataURI = canvasRef.current.toDataURL();\n    setImgArr(item => {\n      return [...item, {\n        src: dataURI,\n        title: title,\n        id: imgArr.length\n      }];\n    });\n    console.log('post clicked ');\n  }, [props.onPostClick]); //clear function\n\n  function handleClear() {\n    ctx.current.clearRect(0, 0, 415, 415);\n  } // draw when moving mouse if draw = true\n\n\n  function handleMouseMove(e) {\n    const coords = [e.clientX - canvasRef.current.offsetLeft, e.pageY - canvasRef.current.offsetTop];\n\n    if (drawing) {\n      ctx.current.lineTo(...coords);\n      ctx.current.stroke();\n    }\n\n    const x = e.clientX - canvasRef.current.offsetLeft;\n    const y = e.pageY - canvasRef.current.offsetTop;\n    setPointerPos({\n      x,\n      y\n    });\n  } // begin path / start drawing\n\n\n  function startDrawing(e) {\n    ctx.current.lineJoin = 'round';\n    ctx.current.lineCap = 'round';\n    ctx.current.lineWidth = 20;\n    ctx.current.strokeStyle = \"#3AAFA9\";\n    ctx.current.beginPath(); // actual coordinates\n\n    ctx.current.moveTo(e.clientX - canvasRef.current.offsetLeft, e.pageY - canvasRef.current.offsetTop);\n  }\n\n  function stopDrawing() {\n    ctx.current.closePath(); // setDrawing(false)\n  } // set current title state when typing to input\n\n\n  function inputTitle(event) {\n    setTitle(event.target.value);\n  }\n\n  return React.createElement(\"div\", {\n    className: \"canvas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, props.ifFinished ? React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"TITLE\",\n    onChange: inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }) : null, React.createElement(\"div\", {\n    className: \"canvas__rect\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"pointer\",\n    style: {\n      top: pointerPos.y + 10,\n      left: pointerPos.x - 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(\"canvas\", {\n    ref: canvasRef,\n    width: 415,\n    height: 415 // onMouseDown={startDrawing}\n    // onMouseUp={stopDrawing}\n    ,\n    onMouseOver: startDrawing,\n    onMouseOut: stopDrawing,\n    onMouseMove: handleMouseMove,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/zymka/Desktop/web projects/react playground/my-app/src/components/Canvas.js"],"names":["React","useState","useEffect","useRef","Canvas","props","drawing","setDrawing","imgArr","setImgArr","title","setTitle","pointerPos","setPointerPos","canvasRef","ctx","current","getContext","handleClear","ifStart","ifFinished","getArr","dataURI","toDataURL","item","src","id","length","console","log","onPostClick","clearRect","handleMouseMove","e","coords","clientX","offsetLeft","pageY","offsetTop","lineTo","stroke","x","y","startDrawing","lineJoin","lineCap","lineWidth","strokeStyle","beginPath","moveTo","stopDrawing","closePath","inputTitle","event","target","value","top","left"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\n\nexport default function Canvas(props) {\n  const [drawing, setDrawing] = useState(false)\n  // const [restart, setRestart] = useState(true)\n  const [imgArr, setImgArr] = useState([])\n  const [title, setTitle] = useState(\"\")\n  const [pointerPos, setPointerPos] = useState([])\n  \n  const canvasRef = useRef()\n  const ctx = useRef()\n  \n  useEffect(() => {\n    ctx.current = canvasRef.current.getContext('2d')   \n  }, [])\n\n  // Reset if reset/start is clicked in parent.\n  useEffect(() => {\n    handleClear()\n    if(props.ifStart === \"reset\"){\n      setDrawing(true)\n    } else {\n      setDrawing(false)\n    }\n  }, [props.ifStart])\n\n  // Stop when time is 0\n  useEffect(() => {\n    if(props.ifFinished){\n      setDrawing(false)\n    } \n  }, [props.ifFinished])\n\n  // push imgArr to App\n  useEffect(() => {\n    props.getArr(imgArr)\n  }, [imgArr])\n\n  // push img Src and Title to imgArr state when POST is clicked\n  useEffect(()=>{\n    const dataURI = canvasRef.current.toDataURL();\n    setImgArr(item =>  { return[...item, { src: dataURI, title: title, id: imgArr.length }] }  )\n    console.log('post clicked ')\n  },[props.onPostClick] )\n    \n\n   //clear function\n  function handleClear() {\n     ctx.current.clearRect(0, 0, 415, 415)\n  }\n\n  // draw when moving mouse if draw = true\n  function handleMouseMove(e) {\n    const coords = [\n      e.clientX - canvasRef.current.offsetLeft,\n      e.pageY - canvasRef.current.offsetTop\n    ]\n    if (drawing) { \n      ctx.current.lineTo(...coords)\n      ctx.current.stroke()\n    }\n    const x = e.clientX - canvasRef.current.offsetLeft\n    const y = e.pageY - canvasRef.current.offsetTop\n    setPointerPos({\n      x, y\n    })\n  }\n\n // begin path / start drawing\n  function startDrawing(e) {\n    ctx.current.lineJoin = 'round'\n    ctx.current.lineCap = 'round'\n    ctx.current.lineWidth = 20\n    ctx.current.strokeStyle = \"#3AAFA9\"\n    ctx.current.beginPath();\n    // actual coordinates\n    ctx.current.moveTo(\n      e.clientX - canvasRef.current.offsetLeft,\n      e.pageY - canvasRef.current.offsetTop\n    )\n    \n  }\n\n  function stopDrawing() {\n    ctx.current.closePath()\n    // setDrawing(false)\n  }\n\n  // set current title state when typing to input\n  function inputTitle(event){\n      setTitle(event.target.value)\n   }\n\n\n\n  return (\n    <div className =\"canvas\">\n      {props.ifFinished ? <input type=\"text\" name=\"title\" placeholder =\"TITLE\" onChange={inputTitle} /> : null}\n      <div className =\"canvas__rect\">\n        <div className =\"pointer\" style ={{top: pointerPos.y + 10, left: pointerPos.x - 10 }}></div>\n        <canvas\n        ref={canvasRef}\n        width={415}\n        height={415}\n        // onMouseDown={startDrawing}\n        // onMouseUp={stopDrawing}\n        onMouseOver={startDrawing}\n        onMouseOut={stopDrawing}\n        onMouseMove={handleMouseMove}\n        />\n      </div>\n\n    </div>\n  )\n}\n\n"]},"metadata":{},"sourceType":"module"}