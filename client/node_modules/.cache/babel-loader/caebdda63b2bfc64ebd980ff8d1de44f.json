{"ast":null,"code":"var _jsxFileName = \"/Users/zymka/Desktop/web projects/react playground/my-app/client/src/components/Draw/Canvas.jsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nexport default function Canvas(props) {\n  const [drawing, setDrawing] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [src, setSrc] = useState(); // set drawing URI to state when time is finished\n\n  useEffect(() => {\n    const dataURI = canvasRef.current.toDataURL();\n    setSrc(dataURI);\n  }, [props.ifFinished]); // set current title state when typing to input\n\n  function inputTitle(event) {\n    event.preventDefault();\n    setTitle(event.target.value);\n  } //----- POST artpiece to DB when post is clicked\n\n\n  const artpiece = {\n    username: \"zymka je\",\n    title: title,\n    uri: src,\n    duration: props.drawingTime\n  };\n\n  const clickPost = () => {\n    axios.post('/api/artpieces/add', artpiece).then(res => console.log(res.data));\n    console.log(artpiece);\n  }; // ------- DRAW \n\n\n  const canvasRef = useRef();\n  const ctx = useRef();\n  useEffect(() => {\n    ctx.current = canvasRef.current.getContext('2d');\n  }, []); // draw when moving mouse if draw = true\n\n  function handleMouseMove(e) {\n    const coords = [e.clientX - canvasRef.current.offsetLeft, e.pageY - canvasRef.current.offsetTop];\n\n    if (drawing) {\n      ctx.current.lineTo(...coords);\n      ctx.current.stroke();\n    }\n  } // begin path / start drawing\n\n\n  function startDrawing(e) {\n    ctx.current.lineJoin = 'round';\n    ctx.current.lineCap = 'round';\n    ctx.current.lineWidth = 20; // get background color and set brush color\n\n    const appDiv = document.querySelector(\"body\");\n    const appStyle = getComputedStyle(appDiv);\n    const color = appStyle.backgroundColor;\n    ctx.current.strokeStyle = color;\n    ctx.current.beginPath(); // actual coordinates\n\n    ctx.current.moveTo(e.clientX - canvasRef.current.offsetLeft, e.pageY - canvasRef.current.offsetTop);\n  }\n\n  function stopDrawing() {\n    ctx.current.closePath();\n  } //clear function\n\n\n  function handleClear() {\n    ctx.current.clearRect(0, 0, 415, 415);\n  } // ------- TIMER \n  // Reset if reset/start is clicked in parent.\n\n\n  useEffect(() => {\n    handleClear();\n\n    if (props.ifStart === \"reset\") {\n      setDrawing(true);\n    } else {\n      setDrawing(false);\n    }\n  }, [props.ifStart]); // Stop when time is 0\n\n  useEffect(() => {\n    if (props.ifFinished) {\n      setDrawing(false);\n    }\n  }, [props.ifFinished]);\n  const testpiece = {\n    username: \"zymka je\",\n    title: \"bandau\",\n    uri: \"bandau src\",\n    duration: 10\n  };\n\n  const click = () => {\n    axios.post('/api/artpieces/add', testpiece).then(res => console.log(res.data));\n    console.log(testpiece);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"canvas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: click,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \" bandau \"), props.ifFinished ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"wideBtn\",\n    onClick: clickPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"post\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"TITLE\",\n    autoComplete: \"off\",\n    onChange: inputTitle,\n    value: title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })) : null, React.createElement(\"div\", {\n    className: \"canvas__rect\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"canvas\", {\n    ref: canvasRef,\n    width: 415,\n    height: 415 // onMouseDown={startDrawing}\n    // onMouseUp={stopDrawing}\n    ,\n    onMouseOver: startDrawing,\n    onMouseOut: stopDrawing,\n    onMouseMove: handleMouseMove,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/zymka/Desktop/web projects/react playground/my-app/client/src/components/Draw/Canvas.jsx"],"names":["React","useState","useEffect","useRef","axios","Canvas","props","drawing","setDrawing","title","setTitle","src","setSrc","dataURI","canvasRef","current","toDataURL","ifFinished","inputTitle","event","preventDefault","target","value","artpiece","username","uri","duration","drawingTime","clickPost","post","then","res","console","log","data","ctx","getContext","handleMouseMove","e","coords","clientX","offsetLeft","pageY","offsetTop","lineTo","stroke","startDrawing","lineJoin","lineCap","lineWidth","appDiv","document","querySelector","appStyle","getComputedStyle","color","backgroundColor","strokeStyle","beginPath","moveTo","stopDrawing","closePath","handleClear","clearRect","ifStart","testpiece","click"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nexport default function Canvas(props) {\n  const [drawing, setDrawing] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [src, setSrc] = useState()\n\n  // set drawing URI to state when time is finished\n  useEffect(()=>{\n    const dataURI = canvasRef.current.toDataURL();\n    setSrc(dataURI)\n  },[props.ifFinished] )  \n\n  // set current title state when typing to input\n  function inputTitle(event){\n    event.preventDefault()\n      setTitle(event.target.value)\n    }\n    \n  //----- POST artpiece to DB when post is clicked\n  const artpiece = {\n    username: \"zymka je\",\n    title: title,\n    uri: src,\n    duration: props.drawingTime,\n  }\n  const clickPost = () => {  \n    axios.post('/api/artpieces/add', artpiece)\n    .then(res => console.log(res.data));\n    console.log(artpiece)\n  }\n\n // ------- DRAW \n const canvasRef = useRef()\n const ctx = useRef()\n useEffect(() => {\n   ctx.current = canvasRef.current.getContext('2d')   \n }, [])\n\n  // draw when moving mouse if draw = true\n  function handleMouseMove(e) {\n    const coords = [\n      e.clientX - canvasRef.current.offsetLeft,\n      e.pageY - canvasRef.current.offsetTop\n    ]\n    if (drawing) { \n      ctx.current.lineTo(...coords)\n      ctx.current.stroke()\n    }\n  }\n // begin path / start drawing\n  function startDrawing(e) {\n    ctx.current.lineJoin = 'round'\n    ctx.current.lineCap = 'round'\n    ctx.current.lineWidth = 20\n        // get background color and set brush color\n        const appDiv = document.querySelector(\"body\")\n        const appStyle = getComputedStyle(appDiv)\n        const color = appStyle.backgroundColor    \n    ctx.current.strokeStyle = color\n    ctx.current.beginPath();\n    // actual coordinates\n    ctx.current.moveTo(\n      e.clientX - canvasRef.current.offsetLeft,\n      e.pageY - canvasRef.current.offsetTop\n    )\n  }\n\n  function stopDrawing() {\n    ctx.current.closePath()\n  }\n\n  //clear function\n  function handleClear() {\n    ctx.current.clearRect(0, 0, 415, 415)\n }\n\n // ------- TIMER \n  // Reset if reset/start is clicked in parent.\n  useEffect(() => {\n    handleClear()\n    if(props.ifStart === \"reset\"){\n      setDrawing(true)\n    } else {\n      setDrawing(false)\n    }\n  }, [props.ifStart])\n\n  // Stop when time is 0\n  useEffect(() => {\n    if(props.ifFinished){\n      setDrawing(false)\n    } \n  }, [props.ifFinished])\n\n  const testpiece = {\n    username: \"zymka je\",\n    title: \"bandau\",\n    uri: \"bandau src\",\n    duration: 10,\n  }\nconst click = () => {\n        axios.post('/api/artpieces/add', testpiece)\n        .then(res => console.log(res.data));\n        console.log(testpiece)\n      }\n      \n  return (\n    <div className =\"canvas\">\n            <button onClick ={click}> bandau </button>\n      {props.ifFinished ? \n       <div>\n          <button className =\"wideBtn\" onClick ={clickPost}>post</button>\n          <input \n            type=\"text\" \n            name=\"title\" \n            placeholder =\"TITLE\" \n            autoComplete=\"off\"  \n            onChange={inputTitle} \n            value={title}\n          /> \n        </div>\n      : null}\n\n      <div className =\"canvas__rect\">\n        <canvas\n        ref={canvasRef}\n        width={415}\n        height={415}\n        // onMouseDown={startDrawing}\n        // onMouseUp={stopDrawing}\n        onMouseOver={startDrawing}\n        onMouseOut={stopDrawing}\n        onMouseMove={handleMouseMove}\n        />\n      </div>\n    </div>\n  )\n}\n\n"]},"metadata":{},"sourceType":"module"}